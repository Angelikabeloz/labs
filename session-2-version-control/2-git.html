<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Version Control</title>

<script src="2-git_files/header-attrs-2.10/header-attrs.js"></script>
<script src="2-git_files/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="2-git_files/bootstrap-3.3.5/css/lumen.min.css" rel="stylesheet" />
<script src="2-git_files/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="2-git_files/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="2-git_files/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="2-git_files/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="2-git_files/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="2-git_files/tocify-1.9.1/jquery.tocify.js"></script>
<script src="2-git_files/navigation-1.1/tabsets.js"></script>
<link href="2-git_files/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="2-git_files/pagedtable-1.1/js/pagedtable.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="custom.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>



<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div id="header">



<h1 class="title toc-ignore">Version Control</h1>
<h3 class="subtitle">Getting used to Git(hub) with R</h3>

</div>


<hr />
<div id="welcome-back" class="section level2">
<h2>Welcome back! 💪</h2>
<p>This week we will be looking at a key component of the data science workflow: version control. More specifically we will create your first repo on Github and see how we can use it to keep a record of all the changes that were ever made to your code. This is an essential component of collaborative coding efforts, but can also be immensely beneficial to your own solo projects.</p>
<p>Today’s session will follow the exact recipe suggested in Simon’s lecture:</p>
<ul>
<li>Create a new repo on Github and initialize it</li>
<li>Clone this repo to your local machine</li>
<li>Make some changes to a file (we’ll review some code from last week)</li>
<li>Stage these local changes</li>
<li>Commit them to our Git history with a helpful message</li>
<li>Pull from the GitHub repo just in case anyone else made changes too (not expected here, but good practice).</li>
<li>Pushed our changes to the GitHub repo.</li>
</ul>
<p>Before we get into the nitty-gritty of this week’s session, I would like to suggest you all <a href="https://desktop.github.com/">download Github Desktop</a>. It is a GUI that lets you interact with GitHub and might be an additional option if your do not want to rely on RStudio or the Command Line alone. Instructions to set it up and get it running can be found <a href="https://docs.github.com/en/desktop/installing-and-configuring-github-desktop/overview/getting-started-with-github-desktop">here</a>.</p>
<p>There are a number of different GUIs that you can try out and play around with. Some are better than others. An additional free GUI like GitHub Desktop that I like is <a href="https://www.gitkraken.com/">GitKraken</a>.</p>
<hr />
</div>
<div id="project-management" class="section level1">
<h1>Project Management 🧙</h1>
<p>Before getting to know Git(Hub) it is useful to have a look at R-projects and how you should structure them. Version Control is only useful if your projects can be understood <strong>by a wide range of collaborators</strong>.</p>
<p>First of all, you should always use RStudio projects. They allow you to keep all the files associated with a project together — input data, R scripts, analytical results, figures etc. When you open a Project you will find a .Rproj file. This file contains all the meta information relevant to your project: settings, working directory, open scripts, encoding etc. If you are curious what exactly lies within it, I suggest you open the .Rproj file with a text editor.</p>
<p>However, projects are only as useful as the organization within them. As we saw in the lecture a structure like the following one would be a good starting point.</p>
<pre><code>.
+-- src
+-- output
|   +-- figures
|   +-- tables
+--data
|   +-- raw
|   +-- processed
|
+-- README.md
+-- run_analyses.R 
+-- .gitignore
</code></pre>
<p>The overview can be adapted to requirements inherent to any given project. It might be interesting to spend a little more time looking into the different folders and what they should contains.</p>
<div id="data-folder" class="section level3">
<h3>Data Folder</h3>
<p>The data folder is, as the name suggests, where your data goes. The “raw” folder should contain the original data that will need to be wrangled and manipulated. It might be that your data is stored in an online relational database, or needs to be accessed through an API. In such cases the raw folder can be dispensed with.</p>
<p>Once you have shaped your data into a format that suits your analysis, the data should be stored in the “processed” folder. If you need to perform certain intermediate steps it might also be an idea to create a dedicated “temp” folder.</p>
</div>
<div id="src-folder" class="section level3">
<h3>src folder</h3>
<p>This is the folder that should contain your code. You should aim to emulate the workflow of standard data science project within this folder. It is best to separate different aspects of your project into separate scripts. The names of these scripts should be named so as to make it clear what step of the project they represent (i.e. “2-preprocess-data”, “3-descriptives” etc.). These scripts should sequentially be executed through a main runner script. This can be done calling the <code>source()</code> function.</p>
</div>
<div id="relative-paths" class="section level3">
<h3>relative paths</h3>
<p>Within a given script you should always use relative paths. To access your processed data folder you can use the following file path <code>"./data/processed.RDa"</code>. The “.” represents your current working directory, which is set automatically when you open a new R-project.</p>
<p>For more in depth guides and explanations you can look <a href="https://www.r-bloggers.com/2018/08/structuring-r-projects/">here</a>. If you feel like you want to practice this you can find more material <a href="%22https://github.com/intro-to-data-science-21/labs/blob/main/practice-scripts/01-file-management.R%22">here</a>.</p>
<hr />
</div>
</div>
<div id="setting-up-git" class="section level1">
<h1>Setting Up Git 🔨</h1>
<p>Most of you will already have completed this step (we hope). For future reference however, we included a small reminder on the necessary steps:</p>
<ol style="list-style-type: decimal">
<li><p>Register for a <a href="https://github.com/">GitHub</a> account.</p></li>
<li><p>Install Git (or update version) using the Command Line.</p></li>
</ol>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span> git</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> <span class="at">--version</span></span></code></pre></div>
<pre><code>## /usr/bin/git
## git version 2.30.1 (Apple Git-130)</code></pre>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">brew</span> install git</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="ex">brew</span> install gh</span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Enter Credentials for Git</li>
</ol>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> config <span class="at">--global</span> user.name <span class="st">&#39;its-me&#39;</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> config <span class="at">--global</span> user.email <span class="st">&#39;my-email@adress.eu&#39;</span></span></code></pre></div>
</div>
<div id="suggested-workflow" class="section level1">
<h1>Suggested Workflow 🏄</h1>
<hr />
<p>The following section highlights the recommended workflow that you should employ when you work with Git. You can see it as a sort of recipe that you should follow under most circumstances. At each stage you can find the instructions for working through both the Command Line and through RStudio. <strong>Be aware</strong> however that these are <strong>separate</strong> processes that should not be mixed. Either you use the shell for version control or you use RStudio.</p>
<div id="create-a-new-repo-on-github" class="section level3">
<h3>1. Create a new repo on Github</h3>
<ul>
<li><p>Go to <a href="https://github.com">your github page</a> and make sure you are logged in.</p></li>
<li><p>Click green “New repository” button. Or, if you are on your own profile page, click on “Repositories”, then click the green “New” button.</p></li>
<li><p>How to fill this in:</p>
<ul>
<li>Repository name: my_first_repo (or whatever you want).</li>
<li>Description: “figuring out how this works” (or whatever, but some text is good for the README).</li>
<li>Select Public.</li>
<li>YES Initialize this repository with a README.</li>
<li>For everything else, just accept the default.</li>
</ul></li>
</ul>
<p>Great, now that you created a new repo on Github, it is important to note that you <strong>should always</strong> create a repo <strong>prior</strong> to starting your work in RStudio.</p>
<div class="questionbox">
<div class="center">
<p><strong>Question:</strong></p>
</div>
<div class="center">
<p>There is a distinct advantage to employing the GitHub first, RStudio/Shell second approach, do you know which one?</p>
</div>
</div>
<hr />
</div>
<div id="clone-it-to-your-local-machine" class="section level3 tabset tabset-fade tabset-pills">
<h3 class="tabset tabset-fade tabset-pills">2. Clone it to your local machine</h3>
<p>Whatever way you plan on cloning this repo, you first need to copy the URL identifying it. Luckily there is another green button “Code” that allows you to do just that. Copy the HTTPS link for now. It will look something like this <a href="https://github.com/tom-arend/my_first_repo.git" class="uri">https://github.com/tom-arend/my_first_repo.git</a>.</p>
<div id="using-the-command-line" class="section level4">
<h4>Using the Command Line</h4>
<p>Open the Terminal on your laptop.</p>
<p>Be sure to check what directory you’re in. <code>$ pwd</code> displays the working directory. <code>$ cd</code> is the command to change directory.</p>
<p>Clone a repo into your chosen directory.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> ~/phd_hertie/teaching/IDS_fall_21 </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> clone https://github.com/tom-arend/my_first_repo.git</span></code></pre></div>
<p>Check whether it worked:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> ~/phd_hertie/teaching/IDS_fall_21/my_first_repo</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> log</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> status</span></code></pre></div>
</div>
<div id="using-rstudio" class="section level4">
<h4>Using Rstudio</h4>
<p>In RStudio, go to:</p>
<p>File &gt; New Project &gt; Version Control &gt; Git.</p>
<p>In the “repository URL”-box paste the URL of your new GitHub repository.</p>
<p>Do not just create some random directory for the local copy. Instead think about how you organize your files and folders and make it coherent.</p>
<p>I always suggest that with any new R-project you “Open in new session”.</p>
<p>Finally, click the “Create Project” to create a new directory. What you get are three things in one:</p>
<ul>
<li>a directory or “folder” on your computer</li>
<li>a Git repository, linked to a remote GitHub repository</li>
<li>an RStudio Project</li>
</ul>
<p>In the absence of other constraints, I suggest that all of your R projects have exactly this set-up.</p>
</div>
<div id="using-github-desktop" class="section level4">
<h4>Using Github Desktop</h4>
<p>Here is a short gif on how to clone a repo with GitHub Desktop:</p>
<p><img src="pics/github_desktop_cloning.gif" width="85%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="section" class="section level3 unlisted unnumbered">
<h3 class="unlisted unnumbered"></h3>
<hr />
</div>
<div id="code" class="section level3">
<h3>3. Make changes to a file</h3>
<p>To showcase how useful Git can be, we first need to add some files to our repo. For now there should only be the .gitignore, the .Rproj and the README file. While we do this we might as well review some of the stuff we encountered last week.</p>
<ul>
<li><p>So let’s create a new R script and save it in the directory that we just cloned.</p></li>
<li><p>First load/install necessary packages (the tidyverse suffices here)</p></li>
</ul>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set-up your script ------------------------------------------------------</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages(c(&quot;tidyverse&quot;, &quot;gapminder&quot;, &quot;pacman&quot;)) # uncomment if already installed</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(tidyverse, gapminder)</span></code></pre></div>
<ul>
<li>Then load the data you want to work with into R.</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load your Data into R ---------------------------------------------------</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(gapminder)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(gapminder)</span></code></pre></div>
<ul>
<li>Finally, start cleaning your data.</li>
</ul>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean your Data ---------------------------------------------------------</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>gapminder_clean <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">life_exp =</span> lifeExp, <span class="at">gdp_per_cap =</span> gdpPercap) <span class="sc">%&gt;%</span> </span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gdp =</span> pop <span class="sc">*</span> gdp_per_cap)</span></code></pre></div>
<ul>
<li>For good measure let’s also update our Readme.</li>
</ul>
</div>
<div id="section-1" class="section level3 unlisted unnumbered">
<h3 class="unlisted unnumbered"></h3>
<hr />
</div>
<div id="stage-your-changes-and-commit" class="section level3 tabset tabset-fade tabset-pills">
<h3 class="tabset tabset-fade tabset-pills">4. Stage your Changes and Commit</h3>
<p>Before we get on to the next step, it is a goo idea to save this newly created script and give it a name. Do the same thing for the README file. Now that your changes are saved locally we need to let Git know.</p>
<div id="using-the-command-line-1" class="section level4">
<h4>Using the Command Line</h4>
<p>Stage (“add”) a file or group of files. This allows you to stage specific individual files such as the README file for example.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> add NAME-OF-FILE-OR-FOLDER</span></code></pre></div>
<p>Alternatively you could stage all files (whether updated or not):</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> add <span class="at">-A</span></span></code></pre></div>
<p>Or you could stage updated files only (modified or deleted, but not new):</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> add <span class="at">-u</span></span></code></pre></div>
<p>Finally you can also only stage new files (not updated ones).</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> add .</span></code></pre></div>
<p>Having done so, you are now ready to commit these changes!</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">&quot;Helpful message&quot;</span></span></code></pre></div>
<p>As you can imagine, the command shell with its different options (and there are more beyond the staging phase), can be quicker and more flexible than your GUI interface, especially for experienced users.</p>
</div>
<div id="using-rstudio-1" class="section level4">
<h4>Using RStudio</h4>
<p>In the Environment/History panel a new tab called “git” should have appeared.</p>
<ul>
<li>Click on it and it should display all the changed and new files in your directory.</li>
<li>Now you can select which files you want to stage. Simply tick the box next to your chosen files.</li>
<li>Hit the Commit Button and a new window should open up.</li>
<li>In this window you can quickly add a helpful message to mark exactly what you did. (Do not neglect this, as it helps both you and your collaborators to understand your changes.)</li>
</ul>
<p>This method has the clear advantage of being extremely intuitive. However you are limited to selecting and stageing individual files.</p>
</div>
<div id="using-github-desktop-1" class="section level4">
<h4>Using GitHub Desktop</h4>
<p>Changed or added files are automatically staged in Github Desktop. The GUI also displays (wehere possible) the changes that were done.</p>
<p>You only really need to commit the changes with a nice little summary or message.</p>
<p><img src="pics/github_desktop_stage_commit.gif" width="85%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="section-2" class="section level3 unlisted unnumbered">
<h3 class="unlisted unnumbered"></h3>
<hr />
</div>
<div id="pulling-and-pushing-your-commits" class="section level3 tabset tabset-fade tabset-pills">
<h3 class="tabset tabset-fade tabset-pills">5. Pulling and Pushing your commits</h3>
<p>This part of the version control workflow should be relatively easy. The most important thing to remember is that you should always <strong>pull</strong> before you <strong>push</strong>. The reason for this is that in collaborative projects someone else might have pushed changes to the same file you were working on. This can lead to conflicts that should be avoided.</p>
<div id="using-the-command-line-2" class="section level4">
<h4>Using the Command Line</h4>
<p>There are only two commands you need to remember here and they are pretty intuitive:</p>
<p>To pull from the main repo:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> pull</span></code></pre></div>
<p>And to push your commits:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> push</span></code></pre></div>
</div>
<div id="using-rstudio-2" class="section level4">
<h4>Using RStudio</h4>
<p>In RStudio you should see a change in the <strong>git</strong> tab. It should now read: “Your branch is ahead of ‘origin/main’ by 1 commit”</p>
<p>As long as this information is displayed, you know that you need to pull and push your commit.</p>
<p>To do this simply click on the blue arrow pointing down to <strong>pull</strong> from your main repo, before clicking on the green arrow pointing upwards to <strong>push</strong> your commits.</p>
</div>
<div id="using-github-desktop-2" class="section level4">
<h4>Using Github Desktop</h4>
<p>It is not really straightforward to pull before pushing with Github Desktop. Given that there is no prominent pull button, you need to actively remember to do so prior to pressing the blue push button.</p>
<p><img src="pics/github_desktop_pull_and_push.gif" width="85%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="section-3" class="section level3 unlisted unnumbered">
<h3 class="unlisted unnumbered"></h3>
<p>At some point during either of these processes you will be prompted to enter your Github credentials and password. It might be that this works or it might be that you receiver the following error message:</p>
<blockquote>
<p>remote: Support for password authentication was removed on August 13, 2021. Please use a personal access token instead.</p>
</blockquote>
<div class="noticebox">
<div class="center">
<p><strong>Attention!</strong></p>
</div>
<p>Github no longer supports simply using user-name and password as a way of authenticating yourself. You now have to identify yourself using <em>Personal Access Tokens</em>. You can cache these with <a href="#https">HTTPS</a> or you can use <a href="%22https://happygitwithr.com/ssh-keys.html%22">SSH keys</a>.</p>
</div>
<hr />
</div>
<div id="exercises-part-i" class="section level3">
<h3>Exercises (Part I)</h3>
<p>The best way to get into the habit of using Git in your workflow is to practice! So let us get back to our working example with my_first_repo and the initial_script.</p>
<ol style="list-style-type: decimal">
<li>Go to Github and create a new repo called: exercises_1</li>
<li>Make sure to include a description for the README</li>
<li>Clone that repo to your local machine using your preferred method</li>
<li>Change the README file to read: “Hello Github!”</li>
<li>Save the README.</li>
<li>Stage and Commit your changes (Do not forget the message along your commit!)</li>
<li>First Pull from origin (Not necessary here, but it is good to develop the right habits)</li>
<li>Then push your commit.</li>
</ol>
</div>
</div>
<div id="branches" class="section level1">
<h1>Branches 🌴</h1>
<hr />
<p>A really cool feature of version control with Git are <em>Branches</em>.</p>
<p>Branches allow you to take a snapshot of your existing repo and try out a whole new idea without affecting your main (i.e. “master”) branch.</p>
<p>Only once you (and your collaborators) are 100% satisfied, would you merge it back into the master branch.</p>
<p>Okey, time to play around with branches a little bit!</p>
<div id="section-4" class="section level3 unlisted unnumbered tabset tabset-fade tabset-pills">
<h3 class="unlisted unnumbered tabset tabset-fade tabset-pills"></h3>
<div id="using-the-command-line-3" class="section level4">
<h4>Using the Command Line</h4>
<p>Create a new branch on your local machine and switch to it:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> checkout <span class="at">-b</span> NAME-OF-YOUR-NEW-BRANCH</span></code></pre></div>
<p>Push the new branch to GitHub:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> push origin NAME-OF-YOUR-NEW-BRANCH</span></code></pre></div>
<p>List all branches on your local machine:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> branch</span></code></pre></div>
<p>Switch back to (e.g.) the master branch:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> git checkout master</span></code></pre></div>
<p>Delete a branch</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> git branch <span class="at">-d</span> NAME-OF-YOUR-FAILED-BRANCH</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> git push origin :NAME-OF-YOUR-FAILED-BRANCH</span></code></pre></div>
</div>
<div id="using-rstudio-3" class="section level4">
<h4>Using RStudio</h4>
<p>Creating a new branch within RStudio is very easy.</p>
<ol style="list-style-type: decimal">
<li>Under the git tab in the environment pane you click on the pink L-shaped symbol on the right.</li>
<li>This will launch a new branch that you can name.</li>
<li>Switching branches can be accomplished through the drop-down menu next to it.</li>
</ol>
</div>
<div id="using-github-desktop-3" class="section level4">
<h4>Using Github Desktop</h4>
<p>Given the point-&amp;-click nature of Github Desktop, it is very easy to open a new branch. Here is how it is done:</p>
<p><img src="pics/github_desktop_open_new_branch.gif" width="85%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="section-5" class="section level3 unlisted unnumbered tabset tabset-fade tabset-pills">
<h3 class="unlisted unnumbered tabset tabset-fade tabset-pills"></h3>
</div>
</div>
<div id="pull-requests" class="section level1">
<h1>Pull Requests 🙏</h1>
<hr />
<p>Once you are satisfied that the feature, analysis or whatever it was that you did in your branch, has been completed, you need to notify and ask your collaborators (or yourself) to approve the changes. This is done through Pull Requests.</p>
<p>Pull Requests are best managed directly on Github. As a reminder on how you open pull requests, here is the GIF from the lecture again:</p>
<p><img src="pics/github-rstudio-pr.gif" width="85%" style="display: block; margin: auto;" /></p>
</div>
<div id="dealing-with-merge-conflicts" class="section level1">
<h1>Dealing with Merge Conflicts 🤯</h1>
<hr />
<p>Merge conflicts occur when Git cannot resolve differences in the code between two commits. It only affects commits that apply changes <strong>to the same line of code</strong>. These merge conflicts are part of Git and alert you to the fact that there is a problem that needs to be addressed before continuing. Helpfully, Git marks where the merge conflict occurred within your code, contrasting the conflicting contributions. Unfortunately, it might be more difficult to resolve in larger projects where the problem is not immediately obvious to the human coder. A better approach would be to make extensive use of branches.</p>
</div>
<div id="exercises-part-ii" class="section level1">
<h1>Exercises (Part II) 🏋</h1>
<hr />
<p>For these exercises we will use the same repo created in the first part of the exercises, so be sure to finish them before moving on to this section!</p>
<ol style="list-style-type: decimal">
<li>From the exercises_1 repo open up a new branch called “data-manipulation-idea”.</li>
<li>Switch to this branch and create a new script.</li>
<li>Copy the three code chunks from <a href="#code">this section</a> into the newly created script.</li>
<li>Next, and using the tidyverse, subset our cleaned df to include only countries in the Americas.</li>
<li>Finally, also add a new categorical variable using <code>mutate()</code> that qualifies whether a country is rich or poor! (Hint use the variable gdp_per_cap and <code>ìf_else()</code>)</li>
<li>Save the script!</li>
<li>Stage your changes and commit them. (Make sure you are commiting them within our “data-manipulation-idea” branch.)</li>
<li>Go to your repo online and open a pull request.</li>
<li>Review and merge this pull request.</li>
<li>Delet the now obsolete branch.</li>
</ol>
<hr />
</div>
<div id="appendix" class="section level1">
<h1>Appendix</h1>
<hr />
<div id="https" class="section level3 tabset tabset-fade tabset-pills">
<h3 class="tabset tabset-fade tabset-pills">Caching credentials with HTTPS</h3>
<p>Github recommends that you generate a <em>Personal Access Token</em> and cache it using HTTPS. Luckily for us this can be achieved in a few simple steps.</p>
<div id="using-the-command-line-4" class="section level4">
<h4>Using the Command Line</h4>
<p>You need to go to your Github Account. Then select your logo in the top right &gt; Settings &gt; Developer Settings &gt; Personal Access tokens</p>
<p>There you can create a new <em>PAT</em>. It is suggested that you select the following categories under scope: <code>repo</code>, <code>workflow</code>, <code>gist</code>, <code>admin::org</code> and <code>user</code>.</p>
<p>Finally click the green button “Generate Token”. Make sure to <strong>save a copy of this Token</strong> somewhere secure. Once you leave the site you will lose the token!</p>
<p>Finally enter the following command:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="ex">gh</span> auth login</span></code></pre></div>
<p>In order select: GitHub.com &gt; HTTPS &gt; Yes &gt; Paste an authentication token</p>
<p>Then you simply need to paste your <em>PAT</em> and you should no longer be challenged for your github credentials.</p>
</div>
<div id="using-rstudio-4" class="section level4">
<h4>Using RStudio</h4>
<p>Luckily for R users there are two packages that essentially automate this process for us:</p>
<p>The <code>usethis</code> package has a function that takes you immediately to the relevant GitHub page and preselects the recommended scopes (what github calls settings) for you.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">create_github_token</span>()</span></code></pre></div>
<p>It should look like this:</p>
<p><img src="pics/PAT_github_web.png" width="75%" style="display: block; margin: auto;" /></p>
<p>Next you can use <code>gitcreds</code> to cache your credentials.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>gitcreds<span class="sc">::</span><span class="fu">gitcreds_set</span>()</span></code></pre></div>
<p>It will ask you for your PAT (or if you already cached credentials, whether you want to change them) and store it for you.</p>
<p>Now you should be able to <strong>pull</strong> and <strong>push</strong> to your origin/main repo.</p>
<p>If you ever misplace your token, but you need to use it to authenticate your command line operation for example, you can also call ´gitcreds::gitcreds_set()´ and select the 3. option to display your PAT.</p>
</div>
</div>
</div>

&nbsp;
<hr />
<p style="text-align: center;">A work by Lisa Oswald & Tom Arend</a></p>
<p style="text-align: center;">Some of the content was inspired by <a href="https://happygitwithr.com/"> Jenny Bryan </a>& <a href="https://github.com/SianJMBrooke/Introduction_To_Git"> Sian JM Brooke </a></p>
<p style="text-align: center;"><span style="color: #808080;"><em>Prepared for Intro to Data Science, taught by Simon Munzert</em></span></p>
<p style="text-align: center;"><span style="color: #808080;"><em><a href="https://www.hertie-school.org/en/">Hertie School, Berlin</em></span></p>

<!-- Add icon library -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" >

<!-- Add font awesome icons -->
<p style="text-align: center;">
    <a href="https://github.com/intro-to-data-science-21"  <i class="fab fa-github"></i><a>
</p>

&nbsp;


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
